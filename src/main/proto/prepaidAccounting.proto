syntax = "proto3";

option java_multiple_files = true;
option java_package = "prepaidaccounting";
option java_outer_classname = "PrepaidAccountingProto";

service PrepaidAccounting {
  rpc GetBalance (GetBalanceRequest) returns (BalanceResponse);
  rpc updateBalanceThroughJdbcCache(Deltas) returns (UpdateResponse);
  rpc insertPackageAccount(InsertPackageRequest) returns (InsertPackageResponse);
}

message Delta {
  string dbName = 1;
  int64 idPackageAcc = 2;
  double amount = 3;
}

message Deltas {
  repeated Delta deltas = 1;
}

message UpdateResponse {
  bool success = 1;
  string message = 2;
}

message GetBalanceRequest {
  string dbName = 1;
  int64 idPackageAcc = 2;
}

message BalanceResponse {
  bool status = 1;
  double balance = 2;
  string message = 3;
}

message PackageAccount {
  int64 id = 1;
  int64 packagePurchaseId = 2;
  string name = 3;
  string lastAmount = 4;
  string balanceBefore = 5;
  string balanceAfter = 6;
  string uom = 7;
  bool isSelected = 8;
}

message InsertPackageRequest {
  string dbName = 1;
  PackageAccount pkgAcc = 2;
}

message InsertPackageResponse {
  bool success = 1;
  string message = 2;
}






