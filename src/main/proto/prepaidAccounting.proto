syntax = "proto3";

option java_multiple_files = true;
option java_package = "prepaidaccounting";
option java_outer_classname = "PrepaidAccountingProto";

service PrepaidAccounting {
  rpc GetBalance (GetBalanceRequest) returns (BalanceResponse);
  rpc updateBalanceThroughJdbcCache(Deltas) returns (UpdateResponse);
}

message Delta {
  string dbName = 1;
  int64 idPackageAcc = 2;
  double amount = 3;
}

message Deltas {
  repeated Delta deltas = 1;
}

message UpdateResponse {
  bool success = 1;
  string message = 2;
}

message GetBalanceRequest {
  string dbName = 1;
  int64 idPackageAcc = 2;
}

message BalanceResponse {
  bool status = 1;
  double balance = 2;
  string message = 3;
}





